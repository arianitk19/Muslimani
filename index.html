<!DOCTYPE html>
<html lang="sq">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Perkujtuesi Ditor - Premium</title>
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
    @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@200;400;600;800&display=swap');

    :root {
        --primary: #10b981;
        --bg: #020617;
        --glass: rgba(255, 255, 255, 0.03);
        --border: rgba(255, 255, 255, 0.08);
        --neon-shadow: 0 0 25px rgba(16, 185, 129, 0.2);
    }

    body {
        background: var(--bg);
        color: white;
        font-family: 'Plus Jakarta Sans', sans-serif;
        overflow-x: hidden;
        -webkit-tap-highlight-color: transparent;
    }

    /* --- ANIMACIONET E KARTAVE --- */
    .vakt-card {
        background: linear-gradient(145deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.01) 100%);
        border: 1px solid var(--border);
        border-radius: 2rem;
        padding: 1.2rem;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
    }

    .vakt-card.active {
        border-color: var(--primary);
        background: rgba(16, 185, 129, 0.05);
        box-shadow: var(--neon-shadow);
        transform: scale(1.03);
    }

    .vakt-card.past { opacity: 0.4; filter: grayscale(0.5); }

    /* --- BUTONAT E NAMAZIT (TASK BUTTONS) --- */
    .task-btn {
        transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        border: 1px solid var(--border);
        position: relative;
    }
    
    .task-btn.done {
        background: var(--primary) !important;
        color: #020617 !important;
        border-color: var(--primary);
        box-shadow: 0 0 15px rgba(16, 185, 129, 0.4);
        transform: translateY(-3px);
    }

    /* --- MODAL DESIGN --- */
    #celebration-modal {
        transition: all 0.5s ease;
        backdrop-filter: blur(15px);
    }

    .modal-content {
        background: linear-gradient(180deg, rgba(15, 23, 42, 0.95) 0%, rgba(2, 6, 23, 1) 100%);
        border: 1px solid var(--primary);
        transform: scale(0.9);
        opacity: 0;
        transition: 0.4s all;
    }

    #celebration-modal.active .modal-content {
        transform: scale(1);
        opacity: 1;
    }

    /* --- ORA DHE RING --- */
    #live-clock {
        transition: all 0.5s ease;
        text-shadow: 0 0 20px rgba(255,255,255,0.1);
    }

    .progress-ring__circle {
        transition: stroke-dashoffset 0.8s ease-in-out;
    }

    /* --- MENUJA --- */
    .menu-trigger {
        position: fixed; top: 2.5rem; right: 1.5rem; z-index: 2000;
        padding: 12px; background: var(--glass); border-radius: 1.2rem; border: 1px solid var(--border);
    }
    .burger-line { width: 22px; height: 1.5px; background: var(--primary); margin: 5px 0; transition: 0.4s; }
    
    #full-menu {
        position: fixed; inset: 0; background: rgba(2, 6, 23, 0.98); backdrop-filter: blur(40px);
        z-index: 1999; display: flex; flex-direction: column; justify-content: center;
        padding: 3rem; visibility: hidden; opacity: 0; transition: 0.5s;
    }
    #full-menu.active { visibility: visible; opacity: 1; }

    .glass-card {
        background: var(--glass);
        border: 1px solid var(--border);
        border-radius: 2rem;
        backdrop-filter: blur(10px);
    }
    </style>
</head>

<body>

<div id="intro-screen" class="fixed inset-0 z-[5000] flex flex-col items-center justify-center bg-[#020617] transition-all duration-1000">
    <div class="relative z-10 text-center">
        <div class="mb-6 animate-pulse">
            <i class="fa-solid fa-star-and-crescent text-6xl text-emerald-500"></i>
        </div>
        <h1 class="text-4xl font-extrabold tracking-tighter text-white mb-2">PËRKUJTUESI</h1>
        <p class="text-emerald-500/60 tracking-[0.4em] text-[10px] uppercase mb-10">Eksperiencë Elegante</p>
        <button onclick="startApp()" class="px-10 py-4 rounded-full border border-emerald-500/30 text-emerald-500 font-bold hover:bg-emerald-500 hover:text-black transition-all duration-500">
            FILLONI
        </button>
    </div>
</div>

<div id="celebration-modal" class="fixed inset-0 z-[3000] hidden flex items-center justify-center p-6 bg-black/60">
    <div class="modal-content p-10 rounded-[3rem] text-center max-w-sm w-full shadow-2xl">
        <div class="w-20 h-20 bg-emerald-500 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg shadow-emerald-500/40">
            <i class="fa-solid fa-check text-3xl text-black"></i>
        </div>
        <h2 class="text-3xl font-extrabold mb-3">MashAllah!</h2>
        <p class="text-gray-400 leading-relaxed mb-8">Sot i keni përfunduar të gjitha namazet. Allahu jua pranoftë dhe jua shtoftë dritën në zemër.</p>
        <button onclick="closeCelebration()" class="w-full py-4 bg-emerald-500 text-black font-black rounded-2xl uppercase tracking-widest text-xs active:scale-95 transition-all">Amin</button>
    </div>
</div>

<div class="menu-trigger" onclick="toggleMenu()">
    <div class="burger-line"></div>
    <div class="burger-line"></div>
</div>

<nav id="full-menu">
    <a href="#" class="text-4xl font-bold mb-6 text-emerald-500">Vaktia</a>
    <a href="#" class="text-4xl font-bold mb-6 opacity-30">Lutjet</a>
    <a href="#" class="text-4xl font-bold mb-6 opacity-30">Kibla</a>
    <button onclick="toggleMenu()" class="mt-10 text-xs tracking-widest uppercase opacity-50">Mbyll</button>
</nav>

<header class="pt-20 px-8 text-center">
    <h2 class="text-4xl font-extrabold tracking-tighter mb-10 italic">Selam Alejkum</h2>
    
    <div class="relative w-64 h-64 mx-auto flex items-center justify-center">
        <svg class="absolute inset-0 w-full h-full" viewBox="0 0 220 220">
            <circle class="stroke-white/5" stroke-width="4" fill="transparent" r="95" cx="110" cy="110"/>
            <circle id="progress-bar" class="progress-ring__circle stroke-emerald-500" stroke-width="4" stroke-dasharray="596.9" stroke-dashoffset="596.9" stroke-linecap="round" fill="transparent" r="95" cx="110" cy="110" transform="rotate(-90 110 110)"/>
        </svg>
        <div class="text-center z-10">
            <span id="live-clock" class="text-5xl font-black tracking-tighter">00:00</span>
            <p class="text-[10px] uppercase tracking-widest text-emerald-500 mt-2 font-bold">Koha aktuale</p>
        </div>
    </div>
</header>

<main class="max-w-md mx-auto px-6 py-10 space-y-8">
    <div class="glass-card p-8 text-center relative overflow-hidden">
        <div class="absolute -top-10 -right-10 opacity-5">
            <i class="fa-solid fa-mosque text-9xl"></i>
        </div>
        <p class="text-[10px] uppercase tracking-[0.4em] text-emerald-500 font-bold mb-2">Vakti i Radhës</p>
        <h3 id="next-prayer-name" class="text-4xl font-black italic mb-4">-</h3>
        <span id="prayer-countdown" class="text-sm font-mono bg-black/40 px-4 py-2 rounded-full border border-white/5 text-emerald-500">00:00:00</span>
    </div>

    <div id="vaktet-list" class="grid grid-cols-2 gap-4">
        </div>

    <div class="glass-card p-6">
        <div class="flex justify-between mb-6">
            <span class="text-[10px] uppercase font-bold tracking-widest text-gray-500">Namazi Ditor</span>
            <span id="task-count" class="text-[10px] text-emerald-500 font-bold">0/5</span>
        </div>
        <div class="grid grid-cols-5 gap-3">
            <button onclick="toggleTask(0)" class="task-btn h-14 rounded-2xl bg-white/5 font-bold">S</button>
            <button onclick="toggleTask(1)" class="task-btn h-14 rounded-2xl bg-white/5 font-bold">D</button>
            <button onclick="toggleTask(2)" class="task-btn h-14 rounded-2xl bg-white/5 font-bold">I</button>
            <button onclick="toggleTask(3)" class="task-btn h-14 rounded-2xl bg-white/5 font-bold">A</button>
            <button onclick="toggleTask(4)" class="task-btn h-14 rounded-2xl bg-white/5 font-bold">J</button>
        </div>
    </div>

    <div class="glass-card p-6 flex items-center justify-between">
        <div>
            <span id="dhiker-label" class="block text-lg font-bold italic">SubhanAllah</span>
            <span class="text-[9px] uppercase tracking-widest text-emerald-500 font-bold">Klikoni për dhikër</span>
        </div>
        <button onclick="incrementTasbih()" class="w-16 h-16 rounded-2xl bg-emerald-500 text-black font-black text-xl shadow-lg shadow-emerald-500/20 active:scale-90 transition-all">
            <span id="tasbih-num">0</span>
        </button>
    </div>
</main>

<script>
const vaktetRaw = [
    { emri: 'Sabahu', koha: '05:30', ikona: 'fa-cloud-sun' },
    { emri: 'Lindja', koha: '07:05', ikona: 'fa-sun' },
    { emri: 'Dreka', koha: '11:48', ikona: 'fa-sun' },
    { emri: 'Ikindia', koha: '14:12', ikona: 'fa-cloud-sun' },
    { emri: 'Akshami', koha: '16:21', ikona: 'fa-mountain-sun' },
    { emri: 'Jacia', koha: '17:54', ikona: 'fa-moon' }
];

let completedTasks = JSON.parse(localStorage.getItem('completedTasks')) || [false, false, false, false, false];
let tasbihCount = 0;

function startApp() {
    document.getElementById('intro-screen').classList.add('opacity-0', 'invisible');
}

function updateUI() {
    const now = new Date();
    const h = now.getHours();
    const m = now.getMinutes();
    const currentTotalMin = h * 60 + m;

    document.getElementById('live-clock').innerText = now.toLocaleTimeString('sq-AL', {hour: '2-digit', minute:'2-digit'});

    let currentIdx = -1;
    const listHtml = vaktetRaw.map((v, i) => {
        const [vh, vm] = v.koha.split(':').map(Number);
        const vMin = vh * 60 + vm;
        if (currentTotalMin >= vMin) currentIdx = i;

        const isNow = (i === currentIdx);
        const passed = (currentTotalMin > vMin) && !isNow;

        return `
            <div class="vakt-card ${isNow ? 'active' : ''} ${passed ? 'past' : ''}">
                <i class="fa-solid ${v.ikona} text-emerald-500 mb-3 block text-lg"></i>
                <span class="text-[9px] uppercase font-bold tracking-widest block opacity-50">${v.emri}</span>
                <span class="text-xl font-bold">${v.koha}</span>
            </div>`;
    }).join('');

    document.getElementById('vaktet-list').innerHTML = listHtml;
    updateNextPrayer(now, currentIdx);
}

function updateNextPrayer(now, currentIdx) {
    const nextIdx = (currentIdx + 1) % vaktetRaw.length;
    const nextP = vaktetRaw[nextIdx];
    document.getElementById('next-prayer-name').innerText = nextP.emri;

    const [nh, nm] = nextP.koha.split(':').map(Number);
    let target = new Date();
    target.setHours(nh, nm, 0);
    if (target < now) target.setDate(target.getDate() + 1);

    const diff = target - now;
    const hh = Math.floor(diff / 3600000).toString().padStart(2, '0');
    const mm = Math.floor((diff % 3600000) / 60000).toString().padStart(2, '0');
    const ss = Math.floor((diff % 60000) / 1000).toString().padStart(2, '0');
    document.getElementById('prayer-countdown').innerText = `${hh}:${mm}:${ss}`;

    // Update Progress Ring
    const totalSec = (now.getHours() * 3600) + (now.getMinutes() * 60) + now.getSeconds();
    const offset = 596.9 - ((totalSec / 86400) * 596.9);
    document.getElementById('progress-bar').style.strokeDashoffset = offset;
}

function toggleTask(idx) {
    completedTasks[idx] = !completedTasks[idx];
    localStorage.setItem('completedTasks', JSON.stringify(completedTasks));
    updateTasksUI();
    if (completedTasks.filter(t => t).length === 5) showCelebration();
}

function updateTasksUI() {
    const btns = document.querySelectorAll('.task-btn');
    completedTasks.forEach((s, i) => {
        s ? btns[i].classList.add('done') : btns[i].classList.remove('done');
    });
    document.getElementById('task-count').innerText = `${completedTasks.filter(t => t).length}/5 Namaze`;
}

function incrementTasbih() {
    tasbihCount++;
    if(tasbihCount > 33) tasbihCount = 0;
    document.getElementById('tasbih-num').innerText = tasbihCount;
}

function showCelebration() {
    const modal = document.getElementById('celebration-modal');
    modal.classList.remove('hidden');
    setTimeout(() => modal.classList.add('active'), 10);
}

function closeCelebration() {
    const modal = document.getElementById('celebration-modal');
    modal.classList.remove('active');
    setTimeout(() => modal.classList.add('hidden'), 500);
}

function toggleMenu() {
    document.getElementById('full-menu').classList.toggle('active');
}

// Inicializimi
setInterval(updateUI, 1000);
updateUI();
updateTasksUI();
</script>

</body>
</html>
